<!DOCTYPE html>
<html lang="en">
<head><%- include('../partials/head'); %></head>
<body class="container">

    <h3 class="heading_txt">CRUD Operation with Image - NodeJs MySQL</h3>

    <!-- Add the form to add new student -->
    <form method="post" action="/add" enctype="multipart/form-data">
        <div class="form-group">
            <input type="text" name="name" class="form-control" placeholder="Name" required>
        </div>
        <div class="form-group">
            <input type="number" name="age" min="1" max="99" class="form-control" placeholder="Age" required>
        </div>
        <div class="form-group">
            <input type="file" name="image" class="form-control" accept="image/*" required>
        </div>
        <button type="submit" style="margin-bottom:20px;" class="pull-right btn btn-success"><i class="fa fa-plus"></i>Add New Item</button>
    </form>

    <!-- Display the student records in a table -->
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Image</th>
                <th>Name</th>
                <th>Age</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <% users.forEach(function(user) { %>
                <tr>
                    <td><%= user.id %></td>
                    <td style="width:100px;"><img class="img_td" src="/uploads/<%= user.image %>"/></td>
                    <td><%= user.name %></td>
                    <td><%= user.age %></td>
                    <td>
                        <a href="/edit/<%= user.id %>" style="margin-left:10px;" class="btn btn-primary"><i class="fa fa-edit"></i>Edit</a>
                        <a href="/delete/<%= user.id %>" class="btn btn-danger"><i class="fa fa-trash"></i>Delete</a>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>

<footer>
<%- include('../partials/footer'); %>
</footer>
</body>
</html>